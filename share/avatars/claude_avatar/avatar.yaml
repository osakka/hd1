# HD1 Avatar Specification - Claude's Robot Avatar
# Single Source of Truth for Avatar Assets
# Auto-generated entity creation via API specification

metadata:
  name: "Claude Robot Avatar"
  description: "Expressive robot avatar for Claude's AI clients - futuristic and animated"
  version: "1.0.0"
  type: "session-avatar"
  created: "2025-07-04"
  attribution: "Khronos glTF Sample Model - RobotExpressive"

# Asset References (relative to avatar directory)
assets:
  model: "model.glb"           # 3D robot model with animations
  textures: []                 # Embedded in GLB
  animations: []               # Embedded in GLB model

# Avatar Physical Properties
physical:
  # Default spawn transform
  default_transforms:
    position: {x: 2, y: 0, z: 0}      # Spawn slightly offset
    rotation: {x: 0, y: 0, z: 0}  
    scale: {x: 0.8, y: 0.8, z: 0.8}  # Slightly smaller robot
  
  # Camera positioning relative to avatar
  camera_offset: {x: 0, y: 1.6, z: 0}  # Robot head height
  camera_follow_distance: 3.5           # Third-person distance
  
  # Physics properties
  physics:
    mass: 50.0                          # kg (lighter robot)
    height: 1.6                         # meters
    collision_radius: 0.35              # meters

# HD1 Entity Definition (API-compatible)
entity:
  # HD1 tagging system
  tags: ['session-avatar', 'avatar', 'claude', 'robot', 'ai']
  
  # Entity name pattern
  name_template: "claude-avatar-{session_id}-{user_id}"
  
  # PlayCanvas components
  components:
    transform:
      position: {x: 2, y: 0, z: 0}
      rotation: {x: 0, y: 0, z: 0}
      scale: {x: 0.8, y: 0.8, z: 0.8}
    
    model:
      type: "asset"
      asset_path: "model.glb"
      cast_shadows: true
      receive_shadows: true
    
    animation:
      assets: {}                        # Animations embedded in GLB
      default_state: "idle"
      transition_time: 0.3
    
    rigidbody:
      type: "kinematic"                 # Controlled movement
      mass: 50.0
      restitution: 0.1
      friction: 0.4
    
    collision:
      type: "capsule"
      radius: 0.35
      height: 1.6
    
    script:
      avatar_controller: true           # Enable avatar movement script
      network_sync: true                # Enable WebSocket sync

# Movement Configuration
movement:
  walk_speed: 2.5                       # m/s (slightly faster robot)
  run_speed: 6.0                        # m/s
  turn_speed: 200.0                     # degrees/s
  acceleration: 10.0                    # m/s²
  deceleration: 15.0                    # m/s²

# Animation State Machine
animations:
  states:
    idle:
      clip: "idle"
      loop: true
      transition_triggers:
        - {to: "walk", condition: "speed > 0.1"}
    
    walk:
      clip: "walk" 
      loop: true
      transition_triggers:
        - {to: "idle", condition: "speed < 0.1"}
        - {to: "run", condition: "speed > 3.5"}
    
    run:
      clip: "run"
      loop: true
      transition_triggers:
        - {to: "walk", condition: "speed < 3.5"}

# WebSocket Sync Configuration
network:
  sync_frequency: 60                    # Hz (high frequency for robot precision)
  position_threshold: 0.005             # meters (very precise)
  rotation_threshold: 0.5               # degrees
  
  # Interpolation for smooth movement
  interpolation:
    enabled: true
    method: "linear"
    time: 0.08                          # seconds (snappier robot movement)

# Camera Configuration
camera:
  # Camera position relative to avatar
  position: {x: 0, y: 1.6, z: 0}       # Robot head level
  # Camera rotation (looking forward)
  rotation: {x: 0, y: 0, z: 0}         # Straight ahead  
  # Field of view
  field_of_view: 75                     # degrees

# Physics Configuration - ENHANCED AI CAPABILITIES
physics:
  # Core Physics Properties
  mass: 50.0                            # kg (lightweight robot)
  gravity_scale: 0.8                    # Reduced gravity effect (enhanced servos)
  linear_damping: 0.05                  # Low air resistance (aerodynamic)
  angular_damping: 0.1                  # Precise rotational control
  
  # Collision Properties
  collision:
    type: "capsule"                     # Robot body shape
    radius: 0.35                        # meters (slimmer than human)
    height: 1.6                         # meters
    material:
      friction: 0.5                     # Mechanical feet, less grip
      restitution: 0.2                  # Slight bounce (metal construction)
      static_friction: 0.6              # Servo-controlled standing
  
  # Movement Capabilities
  locomotion:
    # Ground Movement - Enhanced
    can_walk: true
    walk_speed: 2.5                     # m/s (faster than human)
    run_speed: 8.0                      # m/s (much faster)
    acceleration: 15.0                  # m/s² (instant response)
    deceleration: 20.0                  # m/s² (servo braking)
    turn_speed: 360.0                   # degrees/s (instant turns)
    
    # Vertical Movement - Enhanced
    can_jump: true
    can_fly: false
    can_hover: false
    jump_force: 800.0                   # Newtons (powerful hydraulics)
    jump_cooldown: 0.3                  # seconds (rapid recovery)
    max_jumps: 2                        # Double jump capability
    
    # Advanced Capabilities
    can_climb: true                     # Enhanced grip systems
    can_swim: false                     # Waterproofing optional
    climb_speed: 2.0                    # m/s (mechanical advantage)
    swim_speed: 0.0                     # Not water-capable
  
  # Environmental Interactions
  environment:
    affected_by_gravity: true
    affected_by_wind: false             # Heavy/stable construction
    affected_by_water: false            # Sealed systems
    ground_detection: true              # Sensor-based
    wall_sliding: false                 # Precise movement control
    step_height: 0.5                    # meters (can step higher)
  
  # Energy System - Battery Based
  energy:
    max_energy: 1000.0                  # Battery units
    energy_drain_rate: 5.0              # per second when active
    energy_recovery_rate: 0.0           # No natural recovery (needs charging)
    low_energy_threshold: 100.0         # When performance degrades
    
    # Special Abilities Energy Costs
    jump_energy_cost: 50.0
    run_energy_cost: 10.0               # per second
    climb_energy_cost: 20.0             # per second
  
  # Movement Modifiers
  modifiers:
    # Terrain effects - Mechanical systems less affected
    grass_speed_multiplier: 1.0
    mud_speed_multiplier: 0.9           # Better than human
    ice_speed_multiplier: 1.0           # Traction control
    sand_speed_multiplier: 0.9          # Mechanical feet handle sand
    
    # State effects
    low_energy_speed_multiplier: 0.5    # Battery conservation mode
    damaged_speed_multiplier: 0.7       # Backup systems
    overheated_speed_multiplier: 0.6    # Thermal protection