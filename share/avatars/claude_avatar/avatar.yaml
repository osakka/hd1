# HD1 Avatar Specification - Claude's Robot Avatar
# Single Source of Truth for Avatar Assets
# Auto-generated entity creation via API specification

metadata:
  name: "Claude Robot Avatar"
  description: "Expressive robot avatar for Claude's AI clients - futuristic and animated"
  version: "1.0.0"
  type: "session-avatar"
  created: "2025-07-04"
  attribution: "Khronos glTF Sample Model - RobotExpressive"

# Asset References (relative to avatar directory)
assets:
  model: "model.glb"           # 3D robot model with animations
  textures: []                 # Embedded in GLB
  animations: []               # Embedded in GLB model

# Avatar Physical Properties
physical:
  # Default spawn transform
  default_transforms:
    position: {x: 2, y: 0, z: 0}      # Spawn slightly offset
    rotation: {x: 0, y: 0, z: 0}  
    scale: {x: 0.8, y: 0.8, z: 0.8}  # Slightly smaller robot
  
  # Camera positioning relative to avatar
  camera_offset: {x: 0, y: 1.6, z: 0}  # Robot head height
  camera_follow_distance: 3.5           # Third-person distance
  
  # Physics properties
  physics:
    mass: 50.0                          # kg (lighter robot)
    height: 1.6                         # meters
    collision_radius: 0.35              # meters

# HD1 Entity Definition (API-compatible)
entity:
  # HD1 tagging system
  tags: ['session-avatar', 'avatar', 'claude', 'robot', 'ai']
  
  # Entity name pattern
  name_template: "claude-avatar-{session_id}-{user_id}"
  
  # PlayCanvas components
  components:
    transform:
      position: {x: 2, y: 0, z: 0}
      rotation: {x: 0, y: 0, z: 0}
      scale: {x: 0.8, y: 0.8, z: 0.8}
    
    model:
      type: "asset"
      asset_path: "model.glb"
      cast_shadows: true
      receive_shadows: true
    
    animation:
      assets: {}                        # Animations embedded in GLB
      default_state: "idle"
      transition_time: 0.3
    
    rigidbody:
      type: "kinematic"                 # Controlled movement
      mass: 50.0
      restitution: 0.1
      friction: 0.4
    
    collision:
      type: "capsule"
      radius: 0.35
      height: 1.6
    
    script:
      avatar_controller: true           # Enable avatar movement script
      network_sync: true                # Enable WebSocket sync

# Movement Configuration
movement:
  walk_speed: 2.5                       # m/s (slightly faster robot)
  run_speed: 6.0                        # m/s
  turn_speed: 200.0                     # degrees/s
  acceleration: 10.0                    # m/s²
  deceleration: 15.0                    # m/s²

# Animation State Machine
animations:
  states:
    idle:
      clip: "idle"
      loop: true
      transition_triggers:
        - {to: "walk", condition: "speed > 0.1"}
    
    walk:
      clip: "walk" 
      loop: true
      transition_triggers:
        - {to: "idle", condition: "speed < 0.1"}
        - {to: "run", condition: "speed > 3.5"}
    
    run:
      clip: "run"
      loop: true
      transition_triggers:
        - {to: "walk", condition: "speed < 3.5"}

# WebSocket Sync Configuration
network:
  sync_frequency: 60                    # Hz (high frequency for robot precision)
  position_threshold: 0.005             # meters (very precise)
  rotation_threshold: 0.5               # degrees
  
  # Interpolation for smooth movement
  interpolation:
    enabled: true
    method: "linear"
    time: 0.08                          # seconds (snappier robot movement)

# Camera Configuration
camera:
  # Camera position relative to avatar
  position: {x: 0, y: 1.6, z: 0}       # Robot head level
  # Camera rotation (looking forward)
  rotation: {x: 0, y: 0, z: 0}         # Straight ahead  
  # Field of view
  field_of_view: 75                     # degrees