<!DOCTYPE html>
<html>
<head>
    <title>HD1 Holodeck - A-Frame VR</title>
    <script src="/static/js/vendor/aframe.min.js"></script>
    <script src="/static/js/vendor/aframe-environment-component.min.js"></script>
    <script src="/static/js/vendor/aframe-teleport-controls.min.js"></script>
    <script src="/static/js/vendor/aframe-event-set-component.min.js"></script>
    <script src="/static/js/vendor/aframe-look-at-component.min.js"></script>
    <script src="/static/js/vendor/aframe-orbit-controls.min.js"></script>
    <!-- Removed problematic components:
         - aframe-animation-component.min.js (conflicts with core A-Frame animation)
         - aframe-particle-system.js (uses Node.js require())
         - aframe-text-geometry-component.min.js (THREE.FontLoader constructor error)
         - aframe-state-component.min.js (not essential for core functionality)
         - aframe-controller-cursor-component.min.js (VR-specific, not needed for holodeck)
         - aframe-forcegraph-component.min.js (complex, not used yet)
    -->
    <script src="/static/js/hd1-aframe.js"></script>
    <link rel="stylesheet" href="/static/css/hd1-console.css">
</head>
<body>
    <a-scene 
        id="holodeck-scene" 
        hd1-holodeck
        embedded
        style="height: 100vh; width: 100vw;"
        vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false">
        
        <!-- HD1 Holodeck Environment -->
        <a-assets>
            <!-- Asset preloading will go here -->
        </a-assets>
        
        <!-- Default holodeck setup -->
        <a-entity id="holodeck-camera" 
                  camera 
                  look-controls="enabled: true; pointerLockEnabled: true" 
                  wasd-controls="acceleration: 20; fly: false; enabled: true"
                  hd1-keyboard-controls=""
                  hd1-sprint-controls=""
                  holodeck-boundaries=""
                  position="0 1.7 5">
        </a-entity>
        
        <!-- Default lighting -->
        <a-light type="ambient" color="#404040" intensity="0.4"></a-light>
        <a-light type="directional" position="10 10 5" color="#ffffff" intensity="0.8"></a-light>
        
        <!-- Holodeck coordinate system grid -->
        <a-entity id="holodeck-grid"></a-entity>
        
        <!-- Dynamic objects container -->
        <a-entity id="holodeck-objects"></a-entity>
    </a-scene>
    
    <div id="text-overlay"></div>
    
    <div id="debug-panel">
        <div id="debug-header">
            <div style="display: flex; align-items: center; gap: 6px;">
                <span>Holodeck I</span>
                <span class="version-text" id="api-version">v1.0.0</span>
                <span class="js-version-text" id="js-version">loading...</span>
            </div>
            <div style="display: flex; align-items: center; gap: 6px;">
                <span id="debug-collapse-icon">&#8681;</span>
            </div>
        </div>
        <div id="debug-content">
            <div id="debug-scene-bar">
                <select id="debug-scene-select">
                    <option value="">Select Scene...</option>
                    <option value="empty-grid">Empty Grid</option>
                    <option value="anime-ui">Anime UI Demo</option>
                    <option value="ultimate">Ultimate Demo</option>
                    <option value="basic-shapes">Basic Shapes</option>
                </select>
            </div>
            <div id="debug-info-panels">
                <div class="info-panel" id="environment-panel">
                    <div class="panel-title">ENVIRONMENT</div>
                    <div class="panel-content">
                        <div class="info-row">
                            <span class="info-label">Scale:</span>
                            <span class="info-value" id="environment-scale">Human Scale (m)</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Gravity:</span>
                            <span class="info-value" id="environment-gravity">9.81 m/s²</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Temperature:</span>
                            <span class="info-value" id="environment-temperature">20°C</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Atmosphere:</span>
                            <span class="info-value" id="environment-atmosphere">Earth Surface</span>
                        </div>
                    </div>
                </div>
                <div class="info-panel" id="hardware-panel">
                    <div class="panel-title">HARDWARE</div>
                    <div class="panel-content">
                        <div class="info-row">
                            <span class="info-label">FPS:</span>
                            <span class="info-value" id="hardware-fps">60</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">GPU:</span>
                            <span class="info-value" id="hardware-gpu">WebGL Ready</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Memory:</span>
                            <span class="info-value" id="hardware-memory">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Renderer:</span>
                            <span class="info-value" id="hardware-renderer">A-Frame</span>
                        </div>
                    </div>
                </div>
            </div>
            <div id="debug-objects-panel">
                <div class="info-panel info-panel-wide" id="objects-panel">
                    <div class="panel-title">OBJECTS</div>
                    <div class="panel-content">
                        <div class="info-row">
                            <span class="info-label">Total:</span>
                            <span class="info-value" id="objects-total">0</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Visible:</span>
                            <span class="info-value" id="objects-visible">0</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Lights:</span>
                            <span class="info-value" id="objects-lights">0</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Primitives:</span>
                            <span class="info-value" id="objects-primitives">0</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Last Update:</span>
                            <span class="info-value" id="objects-last-update">Never</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Scene:</span>
                            <span class="info-value" id="objects-scene">None</span>
                        </div>
                    </div>
                </div>
            </div>
            <div id="debug-controls-bar">
                <div class="control-buttons-container">
                    <button id="photo-btn" class="control-btn photo-btn" title="Freeze-Frame Mode: Save current session state as new scene">FREEZE-FRAME</button>
                    <button id="video-btn" class="control-btn video-btn" title="Temporal Sequence Mode: Start/Stop temporal recording">TEMPORAL SEQUENCE</button>
                </div>
                <span id="recording-status" class="recording-status"></span>
            </div>
            <div id="debug-log"></div>
        </div>
        <div id="debug-status-bar">
            <div class="status-left">
                <span id="status-connection-indicator" class="connecting"></span>
                <span id="status-connection-text">Connecting</span>
            </div>
            <div class="status-right">
                <span id="status-lock-indicator" class="unlocked"></span>
                <span id="session-id-tag-status" style="display: none;" title="Click to copy session ID">---</span>
                <span id="status-collapse-arrow">&#8679;</span>
            </div>
        </div>
    </div>
    
    <script src="/static/js/hd1-console.js?v=${JS_VERSION}"></script>
</body>
</html>