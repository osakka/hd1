id: flower-pot
name: "Flower Pot"
description: "Ceramic flower pot with drainage hole and saucer"
category: decorative
scale_compatible: ["cm", "m"]
mass: 1.2  # kg at meter scale
material: ceramic

dimensions:
  width: 0.2    # meters
  height: 0.25  # meters  
  depth: 0.2    # meters

physics_properties:
  friction: 0.6      # ceramic surface
  restitution: 0.1   # fragile, low bounce
  density: 2000.0    # kg/mÂ³ (ceramic)

complexity: simple
components:
  - pot_body
  - saucer
  - soil
  - plant

tags: ["decorative", "ceramic", "garden", "indoor", "plant"]

script: |
  #!/bin/bash
  # Flower Pot Prop - Decorative Element
  
  source "${HD1_ROOT}/lib/hd1lib.sh" 2>/dev/null || {
      echo "ERROR: HD1 core library not found"
      exit 1
  }
  
  INSTANCE_NAME="${1:-flower-pot}"
  POSITION_X="${2:-0}"
  POSITION_Y="${3:-0}" 
  POSITION_Z="${4:-0}"
  SCALE_FACTOR="${5:-1.0}"
  SESSION_ID="${6:-${HD1_SESSION_ID:-}}"
  
  if [[ -z "$SESSION_ID" ]]; then
      echo "ERROR: Session ID required"
      exit 1
  fi
  
  echo "PROP: Creating flower pot instance '$INSTANCE_NAME'"
  
  # Base dimensions
  POT_HEIGHT=$(echo "0.2 * $SCALE_FACTOR" | bc -l)
  POT_DIAMETER=$(echo "0.18 * $SCALE_FACTOR" | bc -l)
  SAUCER_HEIGHT=$(echo "0.02 * $SCALE_FACTOR" | bc -l)
  
  # Saucer (under pot)
  SAUCER_Y=$(echo "$POSITION_Y + $SAUCER_HEIGHT / 2" | bc -l)
  hd1::create_object "${INSTANCE_NAME}_saucer" "cylinder" $POSITION_X $SAUCER_Y $POSITION_Z
  
  # Pot body
  POT_Y=$(echo "$POSITION_Y + $SAUCER_HEIGHT + $POT_HEIGHT / 2" | bc -l)
  hd1::create_object "${INSTANCE_NAME}_pot" "cylinder" $POSITION_X $POT_Y $POSITION_Z
  
  # Soil inside pot
  SOIL_HEIGHT=$(echo "$POT_HEIGHT * 0.7" | bc -l)
  SOIL_Y=$(echo "$POSITION_Y + $SAUCER_HEIGHT + $SOIL_HEIGHT / 2" | bc -l)
  hd1::create_object "${INSTANCE_NAME}_soil" "cylinder" $POSITION_X $SOIL_Y $POSITION_Z
  
  # Small plant/flower
  PLANT_Y=$(echo "$POSITION_Y + $SAUCER_HEIGHT + $POT_HEIGHT + 0.05" | bc -l)
  hd1::create_object "${INSTANCE_NAME}_plant" "sphere" $POSITION_X $PLANT_Y $POSITION_Z
  
  echo "COMPONENTS: 4 components created (pot, saucer, soil, plant)"
  echo "PHYSICS: Ceramic material, friction=0.6, mass=1.2kg"
  echo "SCALE: Adapted to scale factor $SCALE_FACTOR"
  echo "Prop instantiated: $INSTANCE_NAME"
  echo "Objects created: 4"