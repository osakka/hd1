id: hammer
name: "Hammer"
description: "Standard claw hammer with steel head and wooden handle"
category: tools
scale_compatible: ["mm", "cm", "m"]
mass: 0.6  # kg at meter scale
material: metal

dimensions:
  width: 0.05   # meters
  height: 0.32  # meters  
  depth: 0.05   # meters

physics_properties:
  friction: 0.9      # steel head grip
  restitution: 0.7   # metal bounce
  density: 7800.0    # kg/mÂ³ (steel)

complexity: simple
components:
  - head
  - handle
  - grip

tags: ["tool", "metal", "construction", "handheld"]

script: |
  #!/bin/bash
  # Hammer Prop - Physics-Accurate Tool
  
  source "${HD1_ROOT}/lib/hd1lib.sh" 2>/dev/null || {
      echo "ERROR: HD1 core library not found"
      exit 1
  }
  
  INSTANCE_NAME="${1:-hammer}"
  POSITION_X="${2:-0}"
  POSITION_Y="${3:-0}" 
  POSITION_Z="${4:-0}"
  SCALE_FACTOR="${5:-1.0}"
  SESSION_ID="${6:-${HD1_SESSION_ID:-}}"
  
  if [[ -z "$SESSION_ID" ]]; then
      echo "ERROR: Session ID required"
      exit 1
  fi
  
  echo "PROP: Creating hammer instance '$INSTANCE_NAME'"
  
  # Base dimensions
  HANDLE_LENGTH=$(echo "0.25 * $SCALE_FACTOR" | bc -l)
  HANDLE_THICKNESS=$(echo "0.03 * $SCALE_FACTOR" | bc -l)
  HEAD_LENGTH=$(echo "0.12 * $SCALE_FACTOR" | bc -l)
  HEAD_HEIGHT=$(echo "0.08 * $SCALE_FACTOR" | bc -l)
  
  # Handle (wooden part)
  hd1::create_object "${INSTANCE_NAME}_handle" "cylinder" \
    $POSITION_X $(echo "$POSITION_Y + $HANDLE_LENGTH / 2" | bc -l) $POSITION_Z
  
  # Hammer head (steel)
  HEAD_Y=$(echo "$POSITION_Y + $HANDLE_LENGTH + $HEAD_HEIGHT / 2" | bc -l)
  hd1::create_object "${INSTANCE_NAME}_head" "box" $POSITION_X $HEAD_Y $POSITION_Z
  
  # Grip area (textured part of handle)
  GRIP_Y=$(echo "$POSITION_Y + $HANDLE_LENGTH * 0.3" | bc -l)
  hd1::create_object "${INSTANCE_NAME}_grip" "cylinder" $POSITION_X $GRIP_Y $POSITION_Z
  
  echo "COMPONENTS: 3 components created (head, handle, grip)"
  echo "PHYSICS: Steel head + wood handle, friction=0.9, mass=0.6kg"
  echo "SCALE: Adapted to scale factor $SCALE_FACTOR"
  echo "Prop instantiated: $INSTANCE_NAME"
  echo "Objects created: 3"